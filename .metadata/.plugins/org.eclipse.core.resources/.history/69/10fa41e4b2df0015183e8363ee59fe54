package se.hirt.pi.adafruit.pwm;

import java.io.IOException;

public class Controller {
	
	private PWMDevice pwm;
	
	public Controller(int bus, int address) {
		try {
			pwm = new PWMDevice(bus, address);
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}
	
	public void setPin(int inPin, boolean state) {
		if (inPin < 0 || inPin > 15)
			throw new IllegalArgumentException("PWM Pin must be 0 <= pin <= 15");
		
		try {
			if (!state)
				setPwm(inPin, 0, 4096);
			else
				setPwm(inPin, 4096, 0);
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}
	
	public void setPwm(int channel, int on, int off) throws IOException {
		pwm.getChannel(channel).setPWM(on, off);
	}

}
