package se.hirt.pi.adafruit.pwm;

import se.hirt.pi.adafruit.pwm.PWMDevice;

public class DcMotor {
	
	private static int[][] pins = {{8,9,10},{13,12,11},{2,3,4},{7,6,5}};
	
	private int pwmPin, in1, in2;
	private Controller controller;
	
	public DcMotor(Controller c, int port) {
		if (port < 1 || port > 4)
			throw new IllegalArgumentException("Port must be int between 0 and 3 inclusive");
		pwmPin = pins[port-1][0];
		in2 = pins[port-1][1];
		in1 = pins[port-1][2];
		controller = c;
	}
	
	public void run(MotorCommand command) {
		switch (command) {
		case FORWARD:
			controller.setPin(in1, 1);
			controller.setPin(in2, 0);
			break;
			
		case BACKWARD:
			controller.setPin(in1, 0);
			controller.setPin(in2, 1);
			break;
			
		case RELEASE:
			controller.setPin(in1, 0);
			controller.setPin(in2, 0);
			break;
		}
	}
}
